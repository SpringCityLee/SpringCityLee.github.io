### 优化点

|                           item                           |
| :------------------------------------------------------: |
|               [表单设计器](#1、表单设计器)               |
|                 [模型版本](#2、模型版本)                 |
|                   [子流程](#3、子流程)                   |
|             [模型校验功能](#4、模型校验功能)             |
|                   [热力图](#5、热力图)                   |
|             [模型一键运行](#6、模型一键运行)             |
|                 [节点按钮](#7、节点按钮)                 |
| [节点人员配置支持脚本获取](#8、节点人员配置支持脚本获取) |
|                 [驳回策略](#9、驳回策略)                 |
|                    [加签](#10、加签)                     |
|                    [委托](#11、委托)                     |
|       [流程事件同步/异步](#12、流程事件同步/异步)        |
|                [自动审批](#13、自动审批)                 |
|          [分支条件配置器](#14、分支条件配置器)           |
|        [在线配置流程图标](#15、在线配置流程图标)         |



##### 1、表单设计器

​     表单设计器https://github.com/GavinZhuLei/vue-form-making

![image-20200422205617375](../../imgs/image-20200422205617375.png)

![image-20200422205814760](../../imgs/image-20200422205814760.png)

##### 2、模型版本

​		BPMN并没有版本的概念。这其实很好，因为可执行的BPMN流程文件很可能已经作为开发项目的一部分，保存在版本管理系统仓库中了（例如Subversion，Git，或者Mercurial）。但是，作为部署过程的一部分，引擎会创建流程定义的版本。在部署时，Flowable会在保存至Flowable数据库前，为`ProcessDefinition`指定版本。

>  http://www.shareniu.com/flowable6.5_zh_document/bpm/index.html#versioningOfProcessDefinitions
>
> 引用于Flowable BPMN 用户手册 (v 6.5.0-SNAPSHOT)  

优点：开发运维过程中可能会对流程图反复设计，有了版本管理流程图就不会担心丢失，如果新设计的流程图有问题可以很快回滚到上个版本，且以后如果产品成熟公司可以有个模型库，比如版本管理->苏州、杭州、长沙等等各个地市分支在现场实施的时候可以直接选取使用或者在给客户调研需求时直接展示。

##### 3、子流程

>http://www.shareniu.com/flowable6.5_zh_document/bpm/index.html#bpmnSubprocessAndCallActivity
>
>引用于Flowable BPMN 用户手册 (v 6.5.0-SNAPSHOT)  



##### 4、模型校验功能

模型校验效果如下图所示：

![流程设计器](http://www.pangubpm.com/m/imgs/1577695184892.png)

模型校验按钮点击之后，画布会显示并罗列所有出问题的节点。红色的代表有错误信息，黄色的代表有警告信息，⚠️信息不等价于❌信息。

##### 5、热力图

![image-20200423141151877](../../imgs/image-20200423141151877.png)

##### 6、模型一键运行

一键运行功能效果如下图所示：

![流程设计器](http://www.pangubpm.com/m/imgs/1577695728393.png)

点击一键运行按钮之后，该弹出框会完整的显示实例执行的信息，如果最后一条日志为结束节点，则表示该模型没有问题，可以正常启动和结束；否则代表该实例会卡在某个节点处。比如网关或者活动节点处的出线不满足条件时，会出线这种情况。盘古对应的表会记录模拟实例的详细信息，包括异常信息和运转信息。

> 关于模型校验与一键模拟运行的区别：
>
> 1. 模型校验为纯前段技术，一键模拟为后台技术。
> 2. 模型校验可以图形化方式显示模型中元素的错误或者警告信息，需要人工去逐个排查。一键模拟可以很直观的看出来当前的模型实际运转轨迹。
> 3. 模型校验和一键模拟策略均可以按需定制。
> 4. 模型校验更侧重于BPM2.0标准以及业务校验，一键模拟更侧重于流程的执行结果。

##### 7、节点按钮

![image-20200423142908550](../../imgs/image-20200423142908550.png)



![image-20200423142943751](../../imgs/image-20200423142943751.png)



##### 8、节点人员配置支持脚本获取

![image-20200421103623621](../../imgs/image-20200421103623621.png)

以几个维度供操作人员选择：指定用户、角色、部门除此之外<font color=green>优点</font>还可以通过自定义的脚本去设置权限，比如说通过户号获取对应的抄表员进行审批。

![image-20200423145641638](../../imgs/image-20200423145641638.png)

##### 9、驳回策略

审批期限：工作日/自然日

驳回&退回策略：![image-20200421170656376](../../imgs/image-20200421170656376.png)



##### 10、加签

![image-20200423150630213](../../imgs/image-20200423150630213.png)



##### 11、委托

委托人在生效期间会代理被委托人处理单据。

![image-20200423152952262](../../imgs/image-20200423152952262.png)

##### 12、流程事件同步/异步

​	配置节点事件时在每个选择的事件都增加类型可供选择

![image-20200423155716489](../../imgs/image-20200423155716489.png)



**13、自动审批**

​      节点属性增加自动审批策略，比如指定时间没审批就自动审批。

##### 14、分支条件配置器

![image-20200421173829949](../../imgs/image-20200421173829949.png)

点击查看表达式获取JUEL表达式

![image-20200421181205647](../../imgs/image-20200421181205647.png)

> 优点：在实际项目实施过程中流程流转出错大部分原因都是分支条件设置有误，比如中英文字母大小写、变量值拼错，使用这种方式可以从根本上杜绝这类问题的发生，且老报装系统中需要设置全局变量，实施过程中经常出现忘记配置全局变量就在分之条件中使用的情况，新系统去除全局变量的设置，flowable引擎将表单参数映射至流程变量，默认可选取表单中所有的字段（如下图）。

![image-20200421174942798](../../imgs/image-20200421174942798.png)

##### 15、在线配置流程图标

新增或编辑时在线选择流程图标

![image-20200424133841880](../../imgs/image-20200424133841880.png)

![image-20200424133913251](../../imgs/image-20200424133913251.png)





### 流程配置过程

![image-20200424102636090](../../imgs/image-20200424102636090.png)

1、通过流程设计器根据业务绘制出流程图

2、分析流程图需要哪些业务表单，通过表单设计器设计出每个业务的表单；

3、配置节点表单

4、配置节点事件

5、配置节点人员

6、配置节点按钮

7、配置节点属性